<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>I Need Resell – Saisie</title>
  <meta name="viewport" content="width=390, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="apple-touch-icon" href="logo1.png" />
  <link rel="manifest" href="manifest.webmanifest" />
  <style>
    :root{ --primary:#6f57d3; --bg:#f2f2f7; --fg:#111; --border:#d9d9de; --r:14px; --pad:18px; --maxw:390px; }
    html,body{height:100%; overflow:hidden;}
    body{ margin:0; padding:0; background:var(--bg); color:var(--fg);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      font-size:18px; line-height:1.35; -webkit-text-size-adjust:100%; overscroll-behavior:none; }
    .screen{ position:fixed; inset:0; display:flex; flex-direction:column;
      padding:calc(env(safe-area-inset-top,0)) env(safe-area-inset-right,0) 0 env(safe-area-inset-left,0); }
    .wrap{ width:100%; max-width:var(--maxw); margin:0 auto; box-sizing:border-box; padding:0 var(--pad); }
    .header .wrap{ padding:10px var(--pad) 4px; }
    .header-gif{ width:100%; height:auto; border-radius:12px; display:block; }
    .content{ flex:1; min-height:0; display:flex; }
    .content .wrap{ padding:10px var(--pad) 12px; display:flex; flex-direction:column; gap:14px; }
    label{ display:block; font-size:18px; font-weight:700; margin:6px 0 8px; }
    input, select{ width:100%; box-sizing:border-box; background:#fff; border:1px solid var(--border); border-radius:var(--r);
      padding:14px 16px; font-size:18px; min-height:52px; outline:none; }
    input:focus,select:focus{ border-color:#c7b8ff; box-shadow:0 0 0 3px rgba(111,87,211,.15); }
    .row{ display:flex; gap:22px; margin-bottom:8px; }
    .row .field{ flex:1; min-width:0; display:flex; flex-direction:column; }
    .hint{ font-size:14px; color:#666; margin-top:8px; }
    .subline{ display:flex; justify-content:flex-end; margin-top:6px; }
    .add-link{ background:none; border:none; color:var(--primary); font-size:15px; text-decoration:underline; padding:0; cursor:pointer; }
    .hidden{ display:none !important; }
    .actions{ padding:10px 0 calc(env(safe-area-inset-bottom,0) + 14px);
      background:linear-gradient(180deg, rgba(242,242,247,0) 0%, var(--bg) 50%); }
    .actions .wrap{ padding-top:0; }
    #submit{ width:100%; height:60px; border:none; border-radius:16px; background:var(--primary); color:#fff;
      font-size:20px; font-weight:800; letter-spacing:.2px; box-shadow:0 10px 24px rgba(111,87,211,.25); cursor:pointer; touch-action:manipulation; }
    #submit:disabled{ opacity:.6; cursor:default; }
    .msg{ font-size:16px; color:#0a8a0a; margin-top:6px; }
    .err{ font-size:16px; color:#c62828; margin-top:6px; }
  </style>
</head>
<body>
  <div class="screen">
    <div class="header">
      <div class="wrap">
        <img src="go.gif" alt="I Need Resell" class="header-gif">
      </div>
    </div>

    <main class="content">
      <div class="wrap">
        <label>Type de transaction</label>
        <select id="type">
          <option>Achat stock</option>
          <option>Frais annexes</option>
          <option>Vente/Cashout</option>
          <option>Abonnement (mensuel)</option>
          <option>Paiement perso</option>
        </select>

        <!-- ACHAT -->
        <div id="bloc-achat" class="bloc">
          <label>Item / Référence</label>
          <input id="item" type="text" placeholder="Ex: 100 Jeans Levi's 501">
          <div class="row">
            <div class="field"><label>Date</label><input id="date-achat" type="date"></div>
            <div class="field"><label>Montant (€)</label><input id="montant-achat" type="text" inputmode="decimal" placeholder="ex: 79,90"><div class="hint">Décimales : virgule ou point</div></div>
          </div>
          <label>Fournisseur</label>
          <select id="fournisseur"></select>
          <div class="subline"><button class="add-link" type="button" data-kind="fournisseur">+ ajouter</button></div>
          <label>Payeur</label>
          <select id="payeur-achat"></select>
        </div>

        <!-- FRAIS -->
        <div id="bloc-frais" class="bloc hidden">
          <label>Description du frais</label>
          <input id="frais-desc" type="text" placeholder="Ex: Pochettes, URSSAF, etc.">
          <div class="row">
            <div class="field"><label>Date</label><input id="date-frais" type="date"></div>
            <div class="field"><label>Montant (€)</label><input id="montant-frais" type="text" inputmode="decimal" placeholder="ex: 12,50"></div>
          </div>
          <label>Catégorie</label>
          <select id="categorie"></select>
          <div class="subline"><button class="add-link" type="button" data-kind="categorie">+ ajouter</button></div>
          <label>Payeur</label>
          <select id="payeur-frais"></select>
        </div>

        <!-- VENTE -->
        <div id="bloc-vente" class="bloc hidden">
          <div class="row">
            <div class="field"><label>Date</label><input id="date-vente" type="date"></div>
            <div class="field"><label>Montant (€)</label><input id="montant-vente" type="text" inputmode="decimal" placeholder="ex: 45"></div>
          </div>
          <label>Compte Vinted</label>
          <select id="compte-vinted"></select>
          <div class="subline"><button class="add-link" type="button" data-kind="compteVinted">+ ajouter</button></div>
          <label>Vendeur</label>
          <select id="vendeur"></select>
        </div>

        <!-- ABONNEMENT -->
        <div id="bloc-abo" class="bloc hidden">
          <label>Nom de l’abonnement</label>
          <input id="abo-nom" type="text" placeholder="Ex: ChatGPT Plus">
          <div class="row">
            <div class="field"><label>Montant (€)</label><input id="abo-montant" type="text" inputmode="decimal" placeholder="ex: 20"></div>
            <div class="field"><label>Jour du mois</label><input id="abo-jour" type="number" min="1" max="31" value="5"></div>
          </div>
          <label>Catégorie</label>
          <select id="abo-categorie"></select>
          <div class="subline"><button class="add-link" type="button" data-kind="categorie">+ ajouter</button></div>
          <label>Payeur</label>
          <select id="abo-payeur"></select>
          <div style="display:flex;align-items:center;gap:10px;margin-top:4px;">
            <input id="abo-actif" type="checkbox" checked style="width:22px;height:22px;">
            <label for="abo-actif" style="margin:0;font-weight:600;">Actif (Oui)</label>
          </div>
        </div>

        <!-- PAIEMENT -->
        <div id="bloc-paiement" class="bloc hidden">
          <div class="row">
            <div class="field"><label>Date</label><input id="date-paiement" type="date"></div>
            <div class="field"><label>Montant (€)</label><input id="montant-paiement" type="text" inputmode="decimal" placeholder="ex: 1000"></div>
          </div>
          <label>Personne</label>
          <select id="payeur-perso"></select>
        </div>

        <div id="feedback" class="msg" style="display:none;"></div>
        <div id="error" class="err" style="display:none;"></div>
      </div>
    </main>

    <div class="actions">
      <div class="wrap"><button id="submit">➕ Ajouter</button></div>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    // PWA (optional mais utile pour A2HS & cache)
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js').catch(()=>{});
    }
  </script>
</body>
</html>
